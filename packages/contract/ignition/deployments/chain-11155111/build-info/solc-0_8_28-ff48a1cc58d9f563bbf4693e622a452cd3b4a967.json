{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-ff48a1cc58d9f563bbf4693e622a452cd3b4a967",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/Observations.sol": "project/contracts/Observations.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/Observations.sol": {
        "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.28;\n\n/**\n-------------------------------------\n|                                   |\n|     ·  ·  ·  ·  ·  ·  ●  ·  ·     |\n|     ·  ·  ·  ·  ·  ·  ·  ·  ·     |\n|     ·  ●  ·  ·  ·  ·  ·  ·  ·     |\n|     ·  ·  ·  ·  ●  ·  ·  ·  ·     |\n|     ·  ·  ·  ·  ·  ·  ·  ·  ●     |\n|     ·  ·  ●  ·  ·  ·  ·  ·  ·     |\n|     ·  ·  ·  ·  ·  ·  ·  ●  ·     |\n|     ·  ●  ·  ·  ·  ●  ·  ·  ·     |\n|     ·  ·  ·  ●  ·  ·  ·  ·  ·     |\n|                                   |\n-------------------------------------\n@title  Observations\n@notice Leave observations on Ethereum artifacts.\n*/\ncontract Observations {\n\n    /// @dev Tracks observation history for a given artifact.\n    struct Artifact {\n        uint128 count;\n        uint128 firstBlock;\n    }\n\n    /// @notice Emitted when someone leaves an observation.\n    event Observation(\n        address indexed collection,\n        uint256 indexed tokenId,\n        address indexed observer,\n        string note,\n        bool located,\n        int32 x,\n        int32 y,\n        uint8 viewType,\n        uint32 time\n    );\n\n    /// @dev collection => tokenId => Artifact\n    mapping(address => mapping(uint256 => Artifact)) public artifacts;\n\n    /// @notice Leave an observation on an artifact.\n    /// @param collection The token contract address.\n    /// @param tokenId The token ID within that collection.\n    /// @param note The observation text.\n    /// @param viewType The view type (0 = image, 1 = animation).\n    /// @param time The time in seconds within the media (0 = no specific time).\n    function observe(\n        address collection,\n        uint256 tokenId,\n        string calldata note,\n        uint8 viewType,\n        uint32 time\n    ) external {\n        _record(collection, tokenId);\n\n        emit Observation(collection, tokenId, msg.sender, note, false, 0, 0, viewType, time);\n    }\n\n    /// @notice Leave an observation at specific coordinates on an artifact.\n    /// @param collection The token contract address.\n    /// @param tokenId The token ID within that collection.\n    /// @param note The observation text.\n    /// @param x The x coordinate on the artifact.\n    /// @param y The y coordinate on the artifact.\n    /// @param viewType The view type (0 = image, 1 = animation).\n    /// @param time The time in seconds within the media (0 = no specific time).\n    function observeAt(\n        address collection,\n        uint256 tokenId,\n        string calldata note,\n        int32 x,\n        int32 y,\n        uint8 viewType,\n        uint32 time\n    ) external {\n        _record(collection, tokenId);\n\n        emit Observation(collection, tokenId, msg.sender, note, true, x, y, viewType, time);\n    }\n\n    /// @dev Track the observation count and first observation block for an artifact.\n    function _record(address collection, uint256 tokenId) internal {\n        Artifact storage a = artifacts[collection][tokenId];\n\n        if (a.count == 0) {\n            a.firstBlock = uint128(block.number);\n        }\n\n        unchecked { ++a.count; }\n    }\n}\n\n// - by jalil, inspired by Sam Spratt's \"The Monument Game\"\n\n"
      }
    }
  }
}